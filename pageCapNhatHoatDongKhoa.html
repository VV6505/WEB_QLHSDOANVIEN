<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n l√Ω Ho·∫°t ƒë·ªông - ƒêo√†n Khoa</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f5f5f5; }
        
        .header { background: linear-gradient(135deg, #4CAF50 0%, #388E3C 100%); color: white; padding: 20px 40px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); }
        .header-content { max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; }
        .header h1 { font-size: 24px; }
        .user-info { display: flex; align-items: center; gap: 15px; }
        .btn-logout { background: rgba(255, 255, 255, 0.2); color: white; border: 1px solid white; padding: 8px 20px; border-radius: 6px; cursor: pointer; transition: all 0.3s; }
        .btn-logout:hover { background: white; color: #4CAF50; }

        .container { max-width: 1400px; margin: 30px auto; padding: 0 20px; }
        .toolbar { background: white; padding: 20px 25px; border-radius: 12px 12px 0 0; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); display: flex; justify-content: space-between; align-items: center; }
        .btn-add { background: linear-gradient(135deg, #4CAF50 0%, #388E3C 100%); color: white; border: none; padding: 12px 25px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 8px; }
        .search-box input { padding: 10px 40px 10px 15px; border: 2px solid #e0e0e0; border-radius: 8px; width: 300px; }

        .table-container { background: white; border-radius: 0 0 12px 12px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); overflow: hidden; }
        table { width: 100%; border-collapse: collapse; }
        thead { background: #f8f9fa; }
        th { padding: 18px 15px; text-align: left; font-weight: 600; color: #555; border-bottom: 2px solid #e0e0e0; }
        th:first-child { padding-left: 25px; }
        th:last-child { text-align: center; }
        td { padding: 18px 15px; color: #666; font-size: 14px; border-bottom: 1px solid #f0f0f0; }
        td:first-child { padding-left: 25px; font-weight: 600; color: #333; }
        td:last-child { text-align: center; }

        .badge { display: inline-block; padding: 5px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; }
        .badge-pending { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .badge-approved { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .badge-rejected { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .badge-open { background: #e3f2fd; color: #1976d2; }
        .badge-full { background: #ffebee; color: #c62828; }
        .badge-ended { background: #eeeeee; color: #616161; }

        .btn-icon { width: 36px; height: 36px; border: none; border-radius: 6px; cursor: pointer; margin: 0 2px; }
        .btn-edit { background: #4CAF50; color: white; }
        .btn-delete { background: #f44336; color: white; }

        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); }
        .modal-content { background: white; margin: 30px auto; padding: 0; border-radius: 12px; width: 90%; max-width: 700px; max-height: 90vh; overflow-y: auto; }
        .modal-header { background: linear-gradient(135deg, #4CAF50 0%, #388E3C 100%); color: white; padding: 20px 25px; border-radius: 12px 12px 0 0; display: flex; justify-content: space-between; }
        .modal-body { padding: 25px; }
        .modal-footer { padding: 20px 25px; background: #f9f9f9; border-radius: 0 0 12px 12px; display: flex; justify-content: flex-end; gap: 10px; }
        
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .full-width { grid-column: span 2; }
        .form-group label { display: block; font-weight: 600; margin-bottom: 8px; font-size: 14px; }
        .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px; }
        
        .progress-mini { width: 60px; height: 6px; background: #f0f0f0; border-radius: 3px; overflow: hidden; margin-top: 5px; }
        .progress-mini-fill { height: 100%; background: #4CAF50; }
        .note { font-size: 0.8rem; color: #666; margin-top: 4px; font-style: italic; }

        .desc-cell {
            max-width: 200px;
            white-space: nowrap; 
            overflow: hidden; 
            text-overflow: ellipsis;
            font-style: italic;
            color: #777;
        }

        .info-box {
            background: #e8f5e9;
            border-left: 4px solid #4CAF50;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
        }

        .info-box strong {
            color: #2e7d32;
        }

        .error-box {
            background: #ffebee;
            border-left: 4px solid #f44336;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
            color: #c62828;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1>üéì Qu·∫£n l√Ω Ho·∫°t ƒë·ªông ƒêo√†n Khoa</h1>
            <div class="user-info">
                <span>Xin ch√†o, <strong id="userName">ƒêo√†n Khoa</strong></span>
                <button class="btn-logout" onclick="logout()">ƒêƒÉng xu·∫•t</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div id="errorBox" class="error-box" style="display:none;">
            <strong>‚ö†Ô∏è L·ªói:</strong> <span id="errorMessage"></span>
        </div>

        <div class="info-box">
            <strong>üìå L∆∞u √Ω:</strong> C√°c ho·∫°t ƒë·ªông b·∫°n t·∫°o s·∫Ω ·ªü tr·∫°ng th√°i <span class="badge badge-pending">Ch·ªù duy·ªát</span> v√† c·∫ßn ƒë∆∞·ª£c ƒêo√†n tr∆∞·ªùng ph√™ duy·ªát tr∆∞·ªõc khi hi·ªÉn th·ªã c√¥ng khai.
        </div>

        <div class="toolbar">
            <div class="toolbar-left">
                <button class="btn-add" onclick="openModal('add')">
                    <span>‚ûï</span> <span>T·∫°o ho·∫°t ƒë·ªông m·ªõi</span>
                </button>
            </div>
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="T√¨m ki·∫øm ho·∫°t ƒë·ªông..." onkeyup="searchActivities()">
            </div>
        </div>

        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>T√™n ho·∫°t ƒë·ªông</th>
                        <th>M√¥ t·∫£</th>
                        <th>Ng√†y t·ªï ch·ª©c</th>
                        <th>ƒêƒÉng k√Ω / Max</th>
                        <th>ƒêi·ªÉm</th>
                        <th>Tr·∫°ng th√°i duy·ªát</th>
                        <th>Tr·∫°ng th√°i HD</th>
                        <th>Thao t√°c</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>
        </div>
    </div>

    <div id="activityModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">T·∫°o ho·∫°t ƒë·ªông m·ªõi</h2>
                <span style="cursor:pointer; font-weight:bold; color:white; font-size:24px" onclick="closeModal()">‚úï</span>
            </div>
            <div class="modal-body">
                <form id="activityForm">
                    <input type="hidden" id="_idHD">
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label>T√™n ho·∫°t ƒë·ªông <span style="color:red">*</span></label>
                            <input type="text" id="tenHD" required>
                        </div>
                        
                        <div class="form-group">
                            <label>M√£ Khoa</label>
                            <input type="text" id="maKhoa" readonly style="background:#f0f0f0">
                        </div>

                        <div class="form-group">
                            <label>ƒê∆°n v·ªã t·ªï ch·ª©c</label>
                            <input type="text" id="donViToChuc" readonly style="background:#f0f0f0">
                        </div>

                        <div class="form-group">
                            <label>Ng√†y t·ªï ch·ª©c <span style="color:red">*</span></label>
                            <input type="datetime-local" id="ngayToChuc" required>
                        </div>

                        <div class="form-group">
                            <label>ƒê·ªãa ƒëi·ªÉm <span style="color:red">*</span></label>
                            <input type="text" id="diaDiem" required>
                        </div>

                        <div class="form-group">
                            <label>S·ªë l∆∞·ª£ng t·ªëi ƒëa <span style="color:red">*</span></label>
                            <input type="number" id="soLuongMAX" min="1" max="130" required placeholder="Nh·∫≠p t·ªëi ƒëa 130">
                        </div>

                        <div class="form-group">
                            <label>ƒêi·ªÉm ho·∫°t ƒë·ªông (Max 10)</label>
                            <input type="number" id="diemHoatDong" min="0" max="10" value="0">
                        </div>

                        <div class="form-group">
                            <label>ƒê√£ ƒëƒÉng k√Ω</label>
                            <input type="number" id="soLuongDaDK" value="0" disabled style="background:#f0f0f0">
                        </div>

                        <div class="form-group">
                            <label>Tr·∫°ng th√°i duy·ªát</label>
                            <input type="text" id="trangThaiDuyet" value="Ch·ªù duy·ªát" disabled style="background:#f0f0f0">
                        </div>
                        
                        <div class="form-group">
                            <label>Tr·∫°ng th√°i HD</label>
                            <input type="text" id="trangThaiHD" value="ƒêang m·ªü" disabled style="background:#f0f0f0">
                        </div>

                        <div class="form-group full-width">
                            <label>M√¥ t·∫£ ho·∫°t ƒë·ªông</label>
                            <textarea id="moTa" rows="3" placeholder="Nh·∫≠p n·ªôi dung chi ti·∫øt ho·∫°t ƒë·ªông..."></textarea>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal()" style="padding:10px 20px; border:none; border-radius:4px; cursor:pointer">H·ªßy</button>
                <button onclick="saveActivity()" style="padding:10px 20px; border:none; border-radius:4px; cursor:pointer; background:#4CAF50; color:white">L∆∞u</button>
            </div>
        </div>
    </div>

    <script>
        // L·∫•y th√¥ng tin user t·ª´ sessionStorage
        let currentUser = null;
        
        function checkLogin() {
            try {
                const userStr = sessionStorage.getItem('currentUser');
                console.log('Session data:', userStr);
                
                if (!userStr) {
                    showError('B·∫°n ch∆∞a ƒëƒÉng nh·∫≠p!');
                    setTimeout(() => {
                        window.location.href = 'pageLogin.html';
                    }, 2000);
                    return false;
                }
                
                currentUser = JSON.parse(userStr);
                console.log('Current user:', currentUser);
                
                if (!currentUser || currentUser.role !== 'faculty') {
                    showError('B·∫°n kh√¥ng c√≥ quy·ªÅn truy c·∫≠p trang n√†y!');
                    setTimeout(() => {
                        window.location.href = 'pageLogin.html';
                    }, 2000);
                    return false;
                }
                
                document.getElementById('userName').textContent = currentUser.name || 'ƒêo√†n Khoa';
                return true;
            } catch (e) {
                console.error('Login check error:', e);
                showError('L·ªói x√°c th·ª±c! Vui l√≤ng ƒëƒÉng nh·∫≠p l·∫°i.');
                setTimeout(() => {
                    window.location.href = 'pageLogin.html';
                }, 2000);
                return false;
            }
        }

        function showError(message) {
            const errorBox = document.getElementById('errorBox');
            const errorMessage = document.getElementById('errorMessage');
            errorMessage.textContent = message;
            errorBox.style.display = 'block';
        }

        // Ki·ªÉm tra ƒëƒÉng nh·∫≠p ngay khi trang load
        if (!checkLogin()) {
            // D·ª´ng vi·ªác load c√°c ph·∫ßn c√≤n l·∫°i c·ªßa trang
            document.body.innerHTML = '<div style="padding:40px; text-align:center; font-size:18px;">ƒêang chuy·ªÉn h∆∞·ªõng ƒë·∫øn trang ƒëƒÉng nh·∫≠p...</div>';
        }

        // D·ªØ li·ªáu m·∫´u
        let activities = [
            {
                _idHD: 'HD002',
                tenHD: 'Workshop: AI & ChatGPT',
                maKhoa: 'CNTT',
                donViToChuc: 'LCƒê Khoa CNTT',
                ngayToChuc: '2025-04-10T08:00',
                diaDiem: 'H·ªôi tr∆∞·ªùng F',
                soLuongMAX: 100,
                soLuongDaDK: 100,
                diemHoatDong: 5,
                trangThaiDuyet: 'ƒê√£ duy·ªát',
                trangThaiHD: 'ƒê√£ ƒë·ªß s·ªë l∆∞·ª£ng',
                moTa: 'H·ªôi th·∫£o chuy√™n ƒë·ªÅ v·ªÅ ·ª©ng d·ª•ng Tr√≠ tu·ªá nh√¢n t·∫°o trong h·ªçc t·∫≠p v√† nghi√™n c·ª©u khoa h·ªçc.'
            },
            {
                _idHD: 'HD008',
                tenHD: 'Cu·ªôc thi L·∫≠p tr√¨nh C++ 2025',
                maKhoa: 'CNTT',
                donViToChuc: 'LCƒê Khoa CNTT',
                ngayToChuc: '2025-07-15T09:00',
                diaDiem: 'Ph√≤ng m√°y A3',
                soLuongMAX: 60,
                soLuongDaDK: 0,
                diemHoatDong: 7,
                trangThaiDuyet: 'Ch·ªù duy·ªát',
                trangThaiHD: 'ƒêang m·ªü',
                moTa: 'Cu·ªôc thi l·∫≠p tr√¨nh nh·∫±m n√¢ng cao k·ªπ nƒÉng code v√† t∆∞ duy gi·∫£i thu·∫≠t.'
            },
            {
                _idHD: 'HD009',
                tenHD: 'H·ªôi th·∫£o S∆∞ ph·∫°m hi·ªán ƒë·∫°i',
                maKhoa: 'SPCN',
                donViToChuc: 'LCƒê Khoa SPCN',
                ngayToChuc: '2025-06-20T14:00',
                diaDiem: 'H·ªôi tr∆∞·ªùng B',
                soLuongMAX: 80,
                soLuongDaDK: 25,
                diemHoatDong: 6,
                trangThaiDuyet: 'ƒê√£ duy·ªát',
                trangThaiHD: 'ƒêang m·ªü',
                moTa: 'Chia s·∫ª c√°c ph∆∞∆°ng ph√°p gi·∫£ng d·∫°y hi·ªán ƒë·∫°i v√† ·ª©ng d·ª•ng c√¥ng ngh·ªá trong gi√°o d·ª•c.'
            }
        ];

        let currentMode = 'add';
        let editingId = null;

        function renderTable(data = null) {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';

            if (!currentUser) {
                tbody.innerHTML = `<tr><td colspan="8" style="text-align:center; padding:30px; color:red">L·ªói x√°c th·ª±c ng∆∞·ªùi d√πng</td></tr>`;
                return;
            }

            // L·ªçc ch·ªâ hi·ªÉn th·ªã ho·∫°t ƒë·ªông c·ªßa khoa m√¨nh
            const facultyActivities = (data || activities).filter(a => a.maKhoa === currentUser.maKhoa);

            if (facultyActivities.length === 0) {
                tbody.innerHTML = `<tr><td colspan="8" style="text-align:center; padding:30px">Ch∆∞a c√≥ ho·∫°t ƒë·ªông n√†o</td></tr>`;
                return;
            }

            facultyActivities.forEach(item => {
                let badgeClassDuyet = 'badge-pending';
                if(item.trangThaiDuyet === 'ƒê√£ duy·ªát') badgeClassDuyet = 'badge-approved';
                if(item.trangThaiDuyet === 'T·ª´ ch·ªëi') badgeClassDuyet = 'badge-rejected';

                let badgeClass = 'badge-ended';
                if(item.trangThaiHD === 'ƒêang m·ªü') badgeClass = 'badge-open';
                if(item.trangThaiHD === 'ƒê√£ ƒë·ªß s·ªë l∆∞·ª£ng') badgeClass = 'badge-full';

                // Ch·ªâ cho ph√©p s·ª≠a/x√≥a n·∫øu ch∆∞a duy·ªát
                let actionButtons = '';
                if (item.trangThaiDuyet === 'Ch·ªù duy·ªát') {
                    actionButtons = `
                        <button class="btn-icon btn-edit" onclick="editActivity('${item._idHD}')">‚úèÔ∏è</button>
                        <button class="btn-icon btn-delete" onclick="deleteActivity('${item._idHD}')">üóëÔ∏è</button>
                    `;
                } else {
                    actionButtons = `<span style="color:#999; font-size:12px">ƒê√£ duy·ªát</span>`;
                }

                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>
                        <div style="font-weight:bold">${item.tenHD}</div>
                        <small style="color:#888">${item._idHD}</small>
                    </td>
                    <td class="desc-cell" title="${item.moTa || 'Kh√¥ng c√≥ m√¥ t·∫£'}">
                        ${item.moTa || '<i>(Tr·ªëng)</i>'}
                    </td>
                    <td>${new Date(item.ngayToChuc).toLocaleString('vi-VN')}</td>
                    <td>
                        <div>${item.soLuongDaDK} / ${item.soLuongMAX}</div>
                        <div class="progress-mini">
                            <div class="progress-mini-fill" style="width: ${(item.soLuongDaDK/item.soLuongMAX)*100}%"></div>
                        </div>
                    </td>
                    <td style="font-weight:bold; color:#4CAF50; text-align:center">${item.diemHoatDong}</td>
                    <td><span class="badge ${badgeClassDuyet}">${item.trangThaiDuyet}</span></td>
                    <td><span class="badge ${badgeClass}">${item.trangThaiHD}</span></td>
                    <td>
                        ${actionButtons}
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        function openModal(mode, id = null) {
            if (!currentUser) {
                alert('L·ªói x√°c th·ª±c! Vui l√≤ng ƒëƒÉng nh·∫≠p l·∫°i.');
                return;
            }

            currentMode = mode;
            const modal = document.getElementById('activityModal');
            document.getElementById('activityForm').reset();

            // ƒêi·ªÅn s·∫µn th√¥ng tin khoa
            document.getElementById('maKhoa').value = currentUser.maKhoa;
            document.getElementById('donViToChuc').value = `LCƒê Khoa ${currentUser.maKhoa}`;

            if (mode === 'add') {
                document.getElementById('modalTitle').innerText = 'T·∫°o ho·∫°t ƒë·ªông m·ªõi';
                document.getElementById('soLuongDaDK').value = 0;
                document.getElementById('trangThaiDuyet').value = 'Ch·ªù duy·ªát';
                document.getElementById('trangThaiHD').value = 'ƒêang m·ªü';
            } else {
                document.getElementById('modalTitle').innerText = 'C·∫≠p nh·∫≠t ho·∫°t ƒë·ªông';
                const item = activities.find(x => x._idHD === id);
                editingId = id;

                document.getElementById('_idHD').value = item._idHD;
                document.getElementById('tenHD').value = item.tenHD;
                document.getElementById('ngayToChuc').value = item.ngayToChuc;
                document.getElementById('diaDiem').value = item.diaDiem;
                document.getElementById('soLuongMAX').value = item.soLuongMAX;
                document.getElementById('diemHoatDong').value = item.diemHoatDong;
                document.getElementById('soLuongDaDK').value = item.soLuongDaDK;
                document.getElementById('trangThaiDuyet').value = item.trangThaiDuyet;
                document.getElementById('trangThaiHD').value = item.trangThaiHD;
                document.getElementById('moTa').value = item.moTa || "";
            }
            modal.style.display = 'block';
        }

        function closeModal() {
            document.getElementById('activityModal').style.display = 'none';
        }

        function saveActivity() {
            const tenHD = document.getElementById('tenHD').value;
            const maKhoa = currentUser.maKhoa;
            const donViToChuc = document.getElementById('donViToChuc').value;
            const ngayToChuc = document.getElementById('ngayToChuc').value;
            const diaDiem = document.getElementById('diaDiem').value;
            const soLuongMAX = parseInt(document.getElementById('soLuongMAX').value);
            const diemHoatDong = parseInt(document.getElementById('diemHoatDong').value);
            const moTa = document.getElementById('moTa').value;

            if (!tenHD || !ngayToChuc || !diaDiem || !soLuongMAX) {
                alert("Vui l√≤ng nh·∫≠p ƒë·ªß th√¥ng tin!");
                return;
            }

            if (soLuongMAX > 130) {
                alert("‚ö†Ô∏è L·ªói: S·ªë l∆∞·ª£ng t·ªëi ƒëa kh√¥ng ƒë∆∞·ª£c v∆∞·ª£t qu√° 130 sinh vi√™n!");
                document.getElementById('soLuongMAX').value = 130;
                return;
            }

            if (diemHoatDong > 10) {
                alert("‚ö†Ô∏è L·ªói: ƒêi·ªÉm ho·∫°t ƒë·ªông t·ªëi ƒëa l√† 10 ƒëi·ªÉm!");
                document.getElementById('diemHoatDong').value = 10;
                return;
            }

            const soLuongDaDK = currentMode === 'add' ? 0 : parseInt(document.getElementById('soLuongDaDK').value);
            let trangThaiHD = 'ƒêang m·ªü';
            if (soLuongDaDK >= soLuongMAX) trangThaiHD = 'ƒê√£ ƒë·ªß s·ªë l∆∞·ª£ng';

            if (currentMode === 'add') {
                const newId = 'HD' + Date.now().toString().slice(-4);
                activities.unshift({
                    _idHD: newId,
                    tenHD, 
                    maKhoa, 
                    donViToChuc, 
                    ngayToChuc, 
                    diaDiem,
                    soLuongMAX, 
                    soLuongDaDK, 
                    diemHoatDong, 
                    trangThaiDuyet: 'Ch·ªù duy·ªát',
                    trangThaiHD, 
                    moTa
                });
                alert('‚úÖ T·∫°o ho·∫°t ƒë·ªông th√†nh c√¥ng! ƒêang ch·ªù ƒêo√†n tr∆∞·ªùng duy·ªát.');
            } else {
                const idx = activities.findIndex(x => x._idHD === editingId);
                if (idx !== -1) {
                    activities[idx] = {
                        ...activities[idx],
                        tenHD, ngayToChuc, diaDiem,
                        soLuongMAX, diemHoatDong, trangThaiHD, moTa
                    };
                    alert('‚úÖ C·∫≠p nh·∫≠t ho·∫°t ƒë·ªông th√†nh c√¥ng!');
                }
            }
            closeModal();
            renderTable();
        }

        function deleteActivity(id) {
            if(confirm("X√≥a ho·∫°t ƒë·ªông n√†y?")) {
                activities = activities.filter(x => x._idHD !== id);
                renderTable();
                alert('‚úÖ ƒê√£ x√≥a ho·∫°t ƒë·ªông!');
            }
        }

        function editActivity(id) {
            const item = activities.find(x => x._idHD === id);
            if (item.trangThaiDuyet !== 'Ch·ªù duy·ªát') {
                alert('‚ö†Ô∏è Kh√¥ng th·ªÉ s·ª≠a ho·∫°t ƒë·ªông ƒë√£ ƒë∆∞·ª£c duy·ªát!');
                return;
            }
            openModal('edit', id);
        }
        
        function searchActivities() {
            if (!currentUser) return;
            
            const term = document.getElementById('searchInput').value.toLowerCase();
            const filtered = activities.filter(a => 
                a.maKhoa === currentUser.maKhoa &&
                (a.tenHD.toLowerCase().includes(term) || 
                a.donViToChuc.toLowerCase().includes(term))
            );
            renderTable(filtered);
        }

        function logout() {
            if(confirm('B·∫°n c√≥ ch·∫Øc mu·ªën ƒëƒÉng xu·∫•t?')) {
                sessionStorage.removeItem('currentUser');
                window.location.href = 'pageLogin.html';
            }
        }

        // Render b·∫£ng khi trang load xong
        if (currentUser) {
            renderTable();
        }
    </script>
</body>
</html>