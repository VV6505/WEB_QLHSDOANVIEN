<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n L√Ω ƒêo√†n Ph√≠</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #ffffff;
            color: #3782f5;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, #3782f5 0%, #2563eb 100%);
            color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 1rem;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-circle {
            width: 56px;
            height: 56px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .header-title h1 {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.25rem;
        }

        .header-title p {
            font-size: 0.875rem;
            opacity: 0.9;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-logout {
            background: rgb(255, 255, 255);
            color: #3782f5;
        }

        .btn-logout:hover {
            background: rgb(255, 255, 255);
        }

        /* Main Content */
        main {
            padding: 2rem 1rem;
        }

        .breadcrumb {
            margin-top: 8px;
            margin-bottom: 1.5rem;
            font-size: 0.875rem;
            color: #666;
        }

        .breadcrumb span {
            cursor: pointer;
        }

        .breadcrumb span:hover {
            color: #3782f5;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .stat-card {
            background: linear-gradient(135deg, #3782f5 0%, #2563eb 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(55, 130, 245, 0.2);
        }

        .stat-card.green {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }

        .stat-card.red {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }

        .stat-card.purple {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .stat-icon {
            font-size: 2.5rem;
            opacity: 0.8;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
        }

        .stat-label {
            font-size: 0.875rem;
            font-weight: 600;
            opacity: 0.9;
        }

        .stat-sub {
            font-size: 0.75rem;
            opacity: 0.75;
            margin-top: 0.25rem;
        }

        /* Main Card */
        .card {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid #e5e7eb;
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #e5e7eb;
            margin-bottom: 1.5rem;
        }

        .card-icon {
            font-size: 2rem;
            color: #3782f5;
        }

        .card-title h2 {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 0.25rem;
        }

        .card-title p {
            font-size: 0.875rem;
            color: #6b7280;
        }

        /* Search and Filter */
        .search-filter {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 300px;
            position: relative;
        }

        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 0.75rem 0.75rem 2.5rem;
            border: 2px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            transition: all 0.2s;
        }

        .search-input:focus {
            outline: none;
            border-color: #3782f5;
            box-shadow: 0 0 0 3px rgba(55, 130, 245, 0.1);
        }

        .filter-group {
            display: flex;
            gap: 0.75rem;
        }

        select {
            padding: 0.75rem 1rem;
            border: 2px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        select:focus {
            outline: none;
            border-color: #3782f5;
            box-shadow: 0 0 0 3px rgba(55, 130, 245, 0.1);
        }

        .btn-primary {
            background: #3782f5;
            color: white;
            font-weight: 600;
        }

        .btn-primary:hover {
            background: #2563eb;
        }

        /* Semester Filter */
        .semester-filter {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .semester-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .btn-semester {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-semester.active {
            background: #dbeafe;
            color: #3782f5;
        }

        .btn-semester:not(.active) {
            background: #f3f4f6;
            color: #374151;
        }

        .btn-semester:not(.active):hover {
            background: #e5e7eb;
        }

        /* Table */
        .table-container {
            overflow-x: auto;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: #f9fafb;
        }

        th {
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: #374151;
            border-bottom: 1px solid #e5e7eb;
        }

        td {
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
        }

        tbody tr:hover {
            background: #f0f9ff;
        }

        tbody tr:last-child td {
            border-bottom: none;
        }

        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .status-paid {
            background: #d1fae5;
            color: #065f46;
        }

        .status-unpaid {
            background: #fee2e2;
            color: #991b1b;
        }

        .btn-confirm {
            background: #10b981;
            color: white;
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .btn-confirm:hover {
            background: #059669;
        }

        .text-success {
            color: #10b981;
            font-size: 0.875rem;
        }

        .text-primary {
            color: #3782f5;
            font-weight: 600;
        }

        /* Summary */
        .summary {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.875rem;
            color: #6b7280;
            margin-top: 1rem;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }

        .btn-action {
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .btn-purple {
            background: #8b5cf6;
            color: white;
        }

        .btn-purple:hover {
            background: #7c3aed;
        }

        .btn-blue {
            background: #3782f5;
            color: white;
        }

        .btn-blue:hover {
            background: #2563eb;
        }

        .btn-gray {
            background: #6b7280;
            color: white;
        }

        .btn-gray:hover {
            background: #4b5563;
        }

        /* Alert */
        .alert {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .alert-content {
            display: flex;
            gap: 1rem;
        }

        .alert-icon {
            color: #d97706;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .alert-body h4 {
            color: #92400e;
            font-weight: bold;
            font-size: 1.125rem;
            margin-bottom: 0.5rem;
        }

        .alert-body {
            font-size: 0.875rem;
            color: #78350f;
        }

        .alert-body ul {
            margin-left: 1.25rem;
            margin-top: 0.5rem;
        }

        .alert-body li {
            margin-bottom: 0.25rem;
        }

        .alert-success {
            color: #065f46;
            font-weight: 600;
        }

        /* Footer */
        footer {
            background: #3782f5;
            color: white;
            margin-top: 2rem;
        }

        .footer-content {
            text-align: center;
            padding: 1rem 1rem;
        }

        .footer-content p {
            font-size: 0.875rem;
        }

        .footer-content p:last-child {
            font-size: 1rem;
            color: #ffffff;
            margin-top: 0.2rem;
        }

        /* Checkbox */
        input[type="checkbox"] {
            width: 1.25rem;
            height: 1.25rem;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            .search-filter {
                flex-direction: column;
            }

            .search-box {
                min-width: 100%;
            }

            .table-container {
                font-size: 0.875rem;
            }

            th, td {
                padding: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="header-left">
                    <div class="logo-circle">üí∞</div>
                    <div class="header-title">
                        <h1>Qu·∫£n L√Ω ƒêo√†n Ph√≠</h1>
                        <p>ƒêo√†n Tr∆∞·ªùng - Admin</p>
                    </div>
                </div>
                <div class="header-right">
                    <span style="font-size: 1rem;">üë§ Admin - Ban Th∆∞·ªùng v·ª•</span>
                    <button class="btn btn-logout">ƒêƒÉng xu·∫•t</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- Breadcrumb -->
        <div class="breadcrumb">
            <span>Trang ch·ªß</span>
            <span> / </span>
            <span style="font-weight: 600; color: #1f2937;">Qu·∫£n l√Ω ƒëo√†n ph√≠</span>
        </div>

        <!-- Statistics Cards -->
        <div class="stats-grid" id="statsGrid">
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-value" id="totalStudents">5</div>
                </div>
                <div class="stat-label">T·ªïng sinh vi√™n</div>
            </div>
            
            <div class="stat-card green">
                <div class="stat-header">
                    <div class="stat-icon">‚úì</div>
                    <div class="stat-value" id="paidCount">2</div>
                </div>
                <div class="stat-label">ƒê√£ ƒë√≥ng ƒëo√†n ph√≠</div>
                <div class="stat-sub" id="paidPercent">40.0% t·ª∑ l·ªá</div>
            </div>
            
            <div class="stat-card red">
                <div class="stat-header">
                    <div class="stat-icon">‚ö†</div>
                    <div class="stat-value" id="unpaidCount">3</div>
                </div>
                <div class="stat-label">Ch∆∞a ƒë√≥ng ƒëo√†n ph√≠</div>
                <div class="stat-sub" id="unpaidPercent">60.0% c√≤n l·∫°i</div>
            </div>
            
            <div class="stat-card purple">
                <div class="stat-header">
                    <div class="stat-icon">üìà</div>
                    <div class="stat-value" id="totalAmountM">0.1M</div>
                </div>
                <div class="stat-label">T·ªïng thu</div>
                <div class="stat-sub" id="totalAmount">100,000ƒë</div>
            </div>
        </div>

        <!-- Main Card -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon">üí∞</div>
                <div class="card-title">
                    <h2>Danh S√°ch ƒê√≥ng ƒêo√†n Ph√≠</h2>
                    <p>Ghi nh·∫≠n, l·∫≠p phi·∫øu thu v√† th·ªëng k√™</p>
                </div>
            </div>

            <!-- Search and Filter -->
            <div class="search-filter">
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input 
                        type="text" 
                        class="search-input" 
                        placeholder="T√¨m ki·∫øm theo MSSV ho·∫∑c t√™n sinh vi√™n..."
                        id="searchInput"
                    />
                </div>
                
                <div class="filter-group">
                    <select id="filterStatus">
                        <option value="all">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                        <option value="paid">ƒê√£ ƒë√≥ng</option>
                        <option value="unpaid">Ch∆∞a ƒë√≥ng</option>
                    </select>
                    
                    <button class="btn btn-primary">
                        üîΩ L·ªçc
                    </button>
                </div>
            </div>

            <!-- Semester Filter -->
            <div class="semester-filter">
                <span>üìÖ</span>
                <span style="font-weight: 600; font-size: 0.875rem; color: #374151;">H·ªçc k·ª≥:</span>
                <div class="semester-buttons">
                    <button class="btn-semester active">HK1-2024</button>
                    <button class="btn-semester">HK2-2024</button>
                </div>
            </div>
            
            <!-- Table -->
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>
                                <input type="checkbox" id="selectAll" />
                            </th>
                            <th>MSSV</th>
                            <th>H·ªç t√™n</th>
                            <th>Khoa</th>
                            <th>L·ªõp</th>
                            <th>H·ªçc k·ª≥</th>
                            <th>S·ªë ti·ªÅn</th>
                            <th>Tr·∫°ng th√°i</th>
                            <th>Ng√†y ƒë√≥ng</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- Table rows will be rendered by JavaScript -->
                    </tbody>
                </table>
            </div>

            <!-- Summary -->
            <div class="summary">
                <div>
                    ƒê√£ ch·ªçn: <strong class="text-primary" id="selectedCount">0</strong> m·ª•c
                </div>
                <div>
                    Hi·ªÉn th·ªã: <strong id="displayedCount">5</strong> / <strong id="totalCount">5</strong> sinh vi√™n
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="btn btn-action btn-purple" id="btnReceipt">
                    üìÑ L·∫≠p phi·∫øu thu (<span id="receiptCount">0</span> m·ª•c)
                </button>
                
                <button class="btn btn-action btn-blue" id="btnExport">
                    üì• Th·ªëng k√™ & Xu·∫•t b√°o c√°o
                </button>

                <button class="btn btn-action btn-gray" id="btnRemind">
                    üìß G·ª≠i nh·∫Øc nh·ªü
                </button>
            </div>
        </div>
        
        <!-- Exception Alert
        <div class="alert">
            <div class="alert-content">
                <div class="alert-icon">‚ö†Ô∏è</div>
                <div class="alert-body">
                    <h4>‚ö†Ô∏è Lu·ªìng X·ª≠ L√Ω</h4>
                    <div>
                        <p><strong>Lu·ªìng ch√≠nh (Ghi nh·∫≠n):</strong></p>
                        <ul>
                            <li>V√†o "Qu·∫£n l√Ω ƒêo√†n ph√≠" ‚Üí T√¨m sinh vi√™n</li>
                            <li>Nh·∫•n "X√°c nh·∫≠n ƒë√£ ƒë√≥ng" ‚Üí Tr·∫°ng th√°i ƒëo√†n ph√≠ ƒë∆∞·ª£c c·∫≠p nh·∫≠t</li>
                        </ul>
                        
                        <p style="margin-top: 0.75rem;"><strong>Lu·ªìng ch√≠nh (L·∫≠p phi·∫øu thu/Th·ªëng k√™):</strong></p>
                        <ul>
                            <li>Ch·ªçn c√°c sinh vi√™n ƒë√£ ƒë√≥ng (checkbox)</li>
                            <li>Nh·∫•n "L·∫≠p phi·∫øu thu" ‚Üí T·∫°o phi·∫øu thu PDF</li>
                            <li>Ho·∫∑c v√†o "Th·ªëng k√™" ‚Üí Xem bi·ªÉu ƒë·ªì v√† xu·∫•t Excel</li>
                        </ul>

                        <p style="margin-top: 0.75rem;"><strong>K·∫øt qu·∫£:</strong></p>
                        <ul>
                            <li class="alert-success">‚úÖ Tr·∫°ng th√°i ƒëo√†n ph√≠ ƒë∆∞·ª£c c·∫≠p nh·∫≠t</li>
                            <li class="alert-success">‚úÖ Phi·∫øu thu ƒë∆∞·ª£c t·∫°o ho·∫∑c bi·ªÉu ƒë·ªì th·ªëng k√™ ƒë∆∞·ª£c hi·ªÉn th·ªã</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div> -->
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <p>¬© 2025 H·ªá th·ªëng Qu·∫£n l√Ω ƒêo√†n vi√™n - Tr∆∞·ªùng ƒêHSPKT | Nh√≥m 37</p>
                <p>Use Case: C·∫≠p nh·∫≠t ƒëo√†n ph√≠ (ghi nh·∫≠n, l·∫≠p phi·∫øu thu, th·ªëng k√™)</p>
            </div>
        </div>
    </footer>

    <script>
        // Initial data
        let doanPhiList = [
            { id: 1, mssv: 'SV001', name: 'Nguy·ªÖn VƒÉn A', khoa: 'CNTT', class: '22IT1', semester: 'HK1-2024', status: 'unpaid', amount: 50000, date: null },
            { id: 2, mssv: 'SV002', name: 'Tr·∫ßn Th·ªã B', khoa: 'CNTT', class: '22IT2', semester: 'HK1-2024', status: 'paid', amount: 50000, date: '2024-10-15' },
            { id: 3, mssv: 'SV003', name: 'L√™ VƒÉn C', khoa: 'C∆° kh√≠', class: '22CK1', semester: 'HK1-2024', status: 'unpaid', amount: 50000, date: null },
            { id: 4, mssv: 'SV004', name: 'Ph·∫°m Th·ªã D', khoa: 'CNTT', class: '22IT1', semester: 'HK1-2024', status: 'paid', amount: 50000, date: '2024-10-20' },
            { id: 5, mssv: 'SV005', name: 'Ho√†ng VƒÉn E', khoa: 'ƒêi·ªán', class: '22D1', semester: 'HK1-2024', status: 'unpaid', amount: 50000, date: null },
        ];

        let selectedItems = [];
        let searchTerm = '';
        let filterStatus = 'all';

        // Get elements
        const searchInput = document.getElementById('searchInput');
        const filterStatusSelect = document.getElementById('filterStatus');
        const selectAllCheckbox = document.getElementById('selectAll');
        const tableBody = document.getElementById('tableBody');
        const btnReceipt = document.getElementById('btnReceipt');
        const btnExport = document.getElementById('btnExport');
        const btnRemind = document.getElementById('btnRemind');

        // Event listeners
        searchInput.addEventListener('input', (e) => {
            searchTerm = e.target.value;
            renderTable();
        });

        filterStatusSelect.addEventListener('change', (e) => {
            filterStatus = e.target.value;
            renderTable();
        });

        selectAllCheckbox.addEventListener('change', (e) => {
            if (e.target.checked) {
                selectedItems = getFilteredList().map(item => item.id);
            } else {
                selectedItems = [];
            }
            renderTable();
        });

        btnReceipt.addEventListener('click', handleCreateReceipt);
        btnExport.addEventListener('click', handleExportReport);
        btnRemind.addEventListener('click', () => {
            alert('G·ª≠i email nh·∫Øc nh·ªü ƒë·∫øn sinh vi√™n ch∆∞a ƒë√≥ng ƒëo√†n ph√≠');
        });

        // Functions
        function getFilteredList() {
            return doanPhiList.filter(item => {
                const matchSearch = item.mssv.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                   item.name.toLowerCase().includes(searchTerm.toLowerCase());
                const matchStatus = filterStatus === 'all' || item.status === filterStatus;
                return matchSearch && matchStatus;
            });
        }

        function updateStats() {
            const stats = {
                total: doanPhiList.length,
                paid: doanPhiList.filter(d => d.status === 'paid').length,
                unpaid: doanPhiList.filter(d => d.status === 'unpaid').length,
                totalAmount: doanPhiList.filter(d => d.status === 'paid').reduce((sum, d) => sum + d.amount, 0)
            };

            document.getElementById('totalStudents').textContent = stats.total;
            document.getElementById('paidCount').textContent = stats.paid;
            document.getElementById('paidPercent').textContent = ((stats.paid/stats.total)*100).toFixed(1) + '% t·ª∑ l·ªá';
            document.getElementById('unpaidCount').textContent = stats.unpaid;
            document.getElementById('unpaidPercent').textContent = ((stats.unpaid/stats.total)*100).toFixed(1) + '% c√≤n l·∫°i';
            document.getElementById('totalAmountM').textContent = (stats.totalAmount/1000000).toFixed(1) + 'M';
            document.getElementById('totalAmount').textContent = stats.totalAmount.toLocaleString() + 'ƒë';
        }

        function renderTable() {
            const filteredList = getFilteredList();
            
            tableBody.innerHTML = '';
            
            filteredList.forEach(item => {
                const row = document.createElement('tr');
                const isChecked = selectedItems.includes(item.id);
                
                row.innerHTML = `
                    <td>
                        <input 
                            type="checkbox" 
                            ${isChecked ? 'checked' : ''} 
                            onchange="handleSelectItem(${item.id})"
                        />
                    </td>
                    <td style="font-weight: 500;">${item.mssv}</td>
                    <td>${item.name}</td>
                    <td>${item.khoa}</td>
                    <td>${item.class}</td>
                    <td>${item.semester}</td>
                    <td style="font-weight: 600; color: #3782f5;">${item.amount.toLocaleString()}ƒë</td>
                    <td>
                        <span class="status-badge ${item.status === 'paid' ? 'status-paid' : 'status-unpaid'}">
                            ${item.status === 'paid' ? '‚úì ƒê√£ ƒë√≥ng' : '‚úó Ch∆∞a ƒë√≥ng'}
                        </span>
                    </td>
                    <td style="font-size: 0.875rem; color: #6b7280;">
                        ${item.date || '-'}
                    </td>
                    <td>
                        ${item.status === 'unpaid' 
                            ? `<button class="btn btn-confirm" onclick="handleConfirmPayment(${item.id})">X√°c nh·∫≠n ƒë√£ ƒë√≥ng</button>`
                            : `<span class="text-success">‚úì Ho√†n t·∫•t</span>`
                        }
                    </td>
                `;
                
                tableBody.appendChild(row);
            });

            // Update summary
            document.getElementById('selectedCount').textContent = selectedItems.length;
            document.getElementById('displayedCount').textContent = filteredList.length;
            document.getElementById('totalCount').textContent = doanPhiList.length;
            document.getElementById('receiptCount').textContent = selectedItems.length;

            // Update select all checkbox
            selectAllCheckbox.checked = filteredList.length > 0 && selectedItems.length === filteredList.length;
        }

        function handleSelectItem(id) {
            if (selectedItems.includes(id)) {
                selectedItems = selectedItems.filter(item => item !== id);
            } else {
                selectedItems.push(id);
            }
            renderTable();
        }

        function handleConfirmPayment(id) {
            doanPhiList = doanPhiList.map(item => 
                item.id === id 
                    ? {...item, status: 'paid', date: new Date().toISOString().split('T')[0]} 
                    : item
            );
            updateStats();
            renderTable();
            alert('‚úÖ ƒê√£ x√°c nh·∫≠n ƒë√≥ng ƒëo√†n ph√≠ th√†nh c√¥ng!');
        }

        function handleCreateReceipt() {
            if (selectedItems.length === 0) {
                alert('‚ùå Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt sinh vi√™n ƒë√£ ƒë√≥ng ƒëo√†n ph√≠!');
                return;
            }
            
            const paidItems = selectedItems.filter(id => {
                const item = doanPhiList.find(d => d.id === id);
                return item && item.status === 'paid';
            });
            
            if (paidItems.length === 0) {
                alert('‚ùå Ch·ªâ c√≥ th·ªÉ l·∫≠p phi·∫øu thu cho sinh vi√™n ƒë√£ ƒë√≥ng ƒëo√†n ph√≠!');
                return;
            }
            
            alert(`‚úÖ ƒê√£ t·∫°o phi·∫øu thu cho ${paidItems.length} sinh vi√™n!\n\nM√£ phi·∫øu: PT${Date.now()}`);
        }

        function handleExportReport() {
            alert('üìä ƒêang xu·∫•t b√°o c√°o th·ªëng k√™ ƒëo√†n ph√≠...\n\nFile s·∫Ω ƒë∆∞·ª£c t·∫£i v·ªÅ ƒë·ªãnh d·∫°ng Excel');
        }

        // Initial render
        updateStats();
        renderTable();
    </script>
</body>
</html>
